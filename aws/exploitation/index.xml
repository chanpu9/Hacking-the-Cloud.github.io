<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Exploitation on Hacking the Cloud</title><link>https://hackingthe.cloud/aws/exploitation/</link><description>Recent content in Exploitation on Hacking the Cloud</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>&amp;copy;{year}, All Rights Reserved</copyright><atom:link href="https://hackingthe.cloud/aws/exploitation/index.xml" rel="self" type="application/rss+xml"/><item><title>Local Privilege Escalation: User Data</title><link>https://hackingthe.cloud/aws/exploitation/local-priv-esc-mod-instance-att/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://hackingthe.cloud/aws/exploitation/local-priv-esc-mod-instance-att/</guid><description>Required IAM Permission: modify-instance-attribute
Recommended but not required: start-instances, describe-instances, stop-instances (makes things go faster, requires less enumeration. The instance must be stopped to alter the user data)
If an adversary has access to the modify-instance attribute permission they can leverage it to escalate to root/System on an EC2 instance.
Usually, user data scripts are only run the first time the instance is started, however this can be changed using cloud-init to run every time the instance restarts.</description></item><item><title>Local Privilege Escalation: User Data 2</title><link>https://hackingthe.cloud/aws/exploitation/local-priv-esc-user-data-s3/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://hackingthe.cloud/aws/exploitation/local-priv-esc-user-data-s3/</guid><description>A common pattern when using EC2 is to define a user data script to be run when an instance is first started or after a reboot. These scripts are typically used to install software, download and set a config, etc. Oftentimes the scripts and packages are pulled from S3 and this introduces an opportunity for a developer/ops person to make a mistake.
If the IAM role is too permissive and allows the role to write to that location, an adversary can leverage this for privilege escalation.</description></item><item><title>Steal EC2 Metadata Credentials via SSRF</title><link>https://hackingthe.cloud/aws/exploitation/ec2-metadata-ssrf/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://hackingthe.cloud/aws/exploitation/ec2-metadata-ssrf/</guid><description>One of the most commonly taught tactics in AWS exploitation is the use of Server Side Request Forgery (SSRF) to access the EC2 metadata service.
All EC2 Instances have access to the metadata service at 169.254.169.254. This contains useful information about the instance such as it&amp;rsquo;s IP address, the name of the security group, etc. On EC2 instances that have an IAM role attached the metadata service will also contain IAM credentials to authenticate as this role.</description></item></channel></rss>